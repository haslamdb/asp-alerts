{% extends "action_analytics/base.html" %}
{% block content %}
<h2>Overview (Last {{ days }} days)</h2>

<div>
    <div class="stat-box">
        <div class="stat-value">{{ data.total_actions }}</div>
        <div class="stat-label">Total Actions</div>
    </div>
    <div class="stat-box">
        <div class="stat-value">{{ data.unique_patients }}</div>
        <div class="stat-label">Unique Patients</div>
    </div>
    <div class="stat-box">
        <div class="stat-value">{{ data.avg_duration_seconds|floatformat:0 }}s</div>
        <div class="stat-label">Avg Duration</div>
    </div>
</div>

<h3>Actions by Module</h3>
<table>
    <tr><th>Module</th><th>Count</th></tr>
    {% for item in data.by_module %}
    <tr><td>{{ item.module }}</td><td>{{ item.count }}</td></tr>
    {% empty %}
    <tr><td colspan="2">No data available</td></tr>
    {% endfor %}
</table>

<h3>Top Users</h3>
<table>
    <tr><th>User</th><th>Actions</th></tr>
    {% for item in data.by_user %}
    <tr><td>{{ item.user__username }}</td><td>{{ item.count }}</td></tr>
    {% empty %}
    <tr><td colspan="2">No data available</td></tr>
    {% endfor %}
</table>
{% endblock %}
